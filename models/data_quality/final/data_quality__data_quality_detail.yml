version: 2
models:
- name: data_quality__data_quality_detail
  config:
    schema: |
      {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_data_quality
      {% else %}data_quality{%- endif -%}
    alias: data_quality_detail
    tags:
    - claims
    - clinical
    - final
    materialized: table
  columns:
  - name: data_source
    description: User-configured field that indicates the data source
  - name: source_date
    description: The source date relevant to the field_name (e.g. field_name = death_date
      means the source_date = death_date)
  - name: table_name
    description: Name of the input table
  - name: drill_down_key
    description: Key for drill down
  - name: drill_down_value
    description: Value for drill down
  - name: claim_type
    description: The claim type (e.g. institutional or professional) or data type
      (e.g. clinical or claims)
  - name: field_name
    description: Name of the input table column
  - name: bucket_name
    description: Category of data quality test result
  - name: invalid_reason
    description: Reason row failed data quality test(s)
  - name: field_value
    description: The source column value being tested
  - name: summary_sk
    description: Surrogate key for summary table
  - name: tuva_last_run
    description: >
      The last time the data was refreshed.  Generated by  `dbt_utils.pretty_time`
      as the local time of the `dbt run`  environment.  Timezone is configurable via
      the `tuva_last_run` var.



