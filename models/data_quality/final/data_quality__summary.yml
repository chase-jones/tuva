version: 2
models:
- name: data_quality__summary
  config:
    schema: |
      {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_data_quality
      {% else %}data_quality{%- endif -%}
    alias: summary
    tags:
    - claims
    - clinical
    - final
    materialized: table
  columns:
  - name: summary_sk
    description: Surrogate key for summary table
  - name: table_claim_type_field_sk
    description: Surrogate key for claim type field.
  - name: data_source
    description: User-configured field that indicates the data source
  - name: table_name
    description: Name of the input table
  - name: claim_type
    description: The claim type (e.g. institutional or professional) or data type
      (e.g. clinical or claims)
  - name: field_name
    description: Name of the input table column
  - name: red
    description: Percentage to show data quality check as red (bad)
  - name: green
    description: Percentage to show data quality check as green (good)
  - name: valid_num
    description: Number of rows valid
  - name: fill_num
    description: Number of rows filled
  - name: denom
    description: The denominator for the data quality tests
  - name: tuva_last_run
    description: >
      The last time the data was refreshed.  Generated by  `dbt_utils.pretty_time`
      as the local time of the `dbt run`  environment.  Timezone is configurable via
      the `tuva_last_run` var.




#### Atomic Checks
## Claims Eligibility

