version: 2
models:
- name: core__location
  description: >
    The location table contains information on practice and facility locations  where
    patients receive medical care.
  config:
    schema: |
      {%- if var('tuva_schema_prefix',None) != None -%}{{var('tuva_schema_prefix')}}_core
      {% else %}core{%- endif -%}
    alias: location
    tags: core
    materialized: table
  columns:
  - name: test
    description: test  - name: location_id
    description: Unique identifier for each location.
    tests:
    - unique:
        config:
          severity: warn
  - name: npi
    description: >
      The national provider identifier associated with the location e.g.  facility_npi.
    meta:
      terminology: 
        https://github.com/tuva-health/the_tuva_project/blob/main/seeds/terminology/terminology__provider.csv
      terminology_note: "**Note: this terminology set is too large to be loaded as
        a seed and is instead loaded from public cloud storage for supported adapters."
  - name: name
    description: The name of the location.
  - name: facility_type
    description: The type of facility e.g. acute care hospital.
  - name: parent_organization
    description: The parent organization associated with the facility.
  - name: address
    description: The street address of the location.
  - name: city
    description: The city of the location.
  - name: state
    description: The state of the location.
  - name: zip_code
    description: The zip code of the location.
  - name: latitude
    description: The latitude of the location.
  - name: longitude
    description: The longitude of the location.
  - name: data_source
    description: Custom description of the source system e.g. Epic.
  - name: tuva_last_run
    description: >
      The last time the data was refreshed.  Generated by  `dbt_utils.pretty_time`
      as the local time of the `dbt run`  environment.  Timezone is configurable via
      the `tuva_last_run` var.


